{"version":3,"sources":["components/Menu.js","components/Timer.js","components/Field.js","components/Board.js","App.js","serviceWorker.js","index.js"],"names":["Menu","id","className","onClick","this","props","newGame","startGame","undo","Component","Timer","Field","piece","parser","DOMParser","parseFromString","CHESS_PIECES","body","textContent","field","file","rank","color","key","handleClick","bind","renderPiece","Board","a","running","state","selected","getPiece","player","getPieceColor","selectPiece","unselectPiece","validMoves","includes","handleMove","validateCheck","console","log","switchPlayer","resetTimer","validateCheckmate","alert","gameOver","getValidMoves","position","getPawnMoves","getKingMoves","getKnightMoves","getRookMoves","getBishopMoves","getQueenMoves","renderBoard","error","isLoaded","message","ranks","i","fields","j","FILES","RANKS","push","setState","document","getElementById","classList","add","highlightValidMoves","remove","unhighlightValidMoves","from","to","innerHTML","split","setPiece","saveMove","code","charCodeAt","moves","move","length","String","fromCharCode","parseInt","Math","abs","upBlocked","downBlocked","leftBlocked","rightBlocked","upRightBlocked","downLeftBlocked","upLeftBlocked","downRightBlocked","forEach","size","record","board","JSON","parse","stringify","boards","charAt","check","kingPosition","getPiecePosition","WHITE_PIECES","BLACK_PIECES","checkFields","checkmate","opponentPieces","currentPlayerPieces","App","switchStatus","loadBoard","INITIAL_BOARD","initialize","stopTimer","startTimer","pop","timer","setInterval","clock","time","getMinutes","getSeconds","winner","players","whites","blacks","floor","clearInterval","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.127ab0af.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nclass Menu extends Component {\n  render() {\n    return (\n      <nav id=\"nav-game-menu\">\n        <div>\n          <button id=\"new\"   className = { \"btn\" } onClick = { this.props.newGame }>New Game</button> \n          <button id=\"start\" className = { \"btn\" } onClick = { this.props.startGame }>Start</button>\n          <button id=\"undo\"  className = { \"btn\" } onClick = { this.props.undo }>Undo</button>\n        </div>\n      </nav>\n    );\n  }\n}\n\nexport default Menu;\n","import React, { Component } from 'react';\n\nclass Timer extends Component {\n  render() {\n    return (\n      <div className = { \"info\" }> \n        <div id=\"player\">\n          &#x2654;\n        </div>\n        <div id=\"timer\">\n          00:00\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Timer;\n","import React, { Component } from 'react';\n\nclass Field extends Component {\n\n  renderPiece(piece) {\n    const parser = new DOMParser();\n    if (piece !== \"\") {\n      return  (parser.parseFromString(`<!doctype html><body>${CHESS_PIECES[piece]}`, 'text/html').body.textContent);\n    } else {\n      return piece;\n    }\n  };\n\n  render() {\n    const {file, rank, color, piece} = this.props.field;\n    let id = file + rank;\n    return (\n      <td key={id} id={id} className={color} onClick={this.props.handleClick.bind(this, file, rank)}>\n        { this.renderPiece(piece) }\n      </td> \n    )\n  }\n};\n\n/* \nNomenclature: {K = king, Q = queen, R = rook, B = bishop, P = pawn, N = knight}\nSource: {\n  [https://en.wikipedia.org/wiki/Chess_symbols_in_Unicode],\n  [https://en.wikipedia.org/wiki/Descriptive_notation]\n}\n */\nconst CHESS_PIECES = {\n  \"K-W\" : \"&#x2654;\", // white chess king\n  \"Q-W\" : \"&#x2655;\", // white chess queen\n  \"R-W\" : \"&#x2656;\", // white chess rook\n  \"B-W\" : \"&#x2657;\", // white chess bishop\n  \"N-W\" : \"&#x2658;\", // white chess knight\n  \"P-W\" : \"&#x2659;\", // white chess pawn\n  \"K-B\" : \"&#x265A;\", // black chess king\n  \"Q-B\" : \"&#x265B;\", // black chess queen\n  \"R-B\" : \"&#x265C;\", // black chess rook\n  \"B-B\" : \"&#x265D;\", // black chess bishop\n  \"N-B\" : \"&#x265E;\", // black chess knight\n  \"P-B\" : \"&#x265F;\"  // black chess pawn\n};\n\nexport default Field;\n","/* SOURCES:\n[https://stackoverflow.com/questions/39462458/react-js-creating-simple-table]\n[https://reactjs.org/docs/faq-ajax.html]\n[https://stackoverflow.com/questions/43638938/updating-an-object-with-setstate-in-react]\n[https://stackoverflow.com/questions/47962519/html-special-character-symbol-not-rendering-in-react-component]\n[https://stackoverflow.com/questions/43718103/arrow-functions-with-async-and-await-in-react-native]\n[https://reactjs.org/docs/faq-functions.html]\n*/\nimport React, { Component } from 'react';\nimport Field from './Field';\n\n\nclass Board extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      selected : {\n        id: null,\n        position : {\n          file : null,\n          rank : null,\n        },\n        piece : null,\n        color : null,\n        validMoves : []\n      },\n    };\n  };\n\n   handleClick = async (file, rank) => {\n    let id = file + rank;\n    if (this.props.running) {\n      if (this.state.selected.id === null) {\n        if (this.getPiece(file, rank) !== \"\") {\n          if (this.props.player === this.getPieceColor(file, rank)) {\n            await this.selectPiece(file, rank);\n          }\n        }\n      } else {\n        if (this.state.selected.id === id) {\n          await this.unselectPiece();\n        } else {\n          \n          if (this.state.selected.validMoves.includes(id)) {\n            this.handleMove(this.state.selected.id, id);\n            await this.unselectPiece();\n\n            if (this.validateCheck() === true) {\n              console.log(\"Under check, move denied\");\n              //this.unheighlightPreviousMove();\n              this.props.undo();\n              await this.props.switchPlayer();\n\n            } else {\n              await this.props.switchPlayer();\n              this.props.resetTimer();\n              if (this.validateCheck() === true) {\n                if (this.validateCheckmate()) {\n                  alert(\"Checkmate! \" + (this.props.player === \"W\" ? \"Blacks win!\" : \"Whites Win!\") );\n                  this.props.gameOver();\n                } else {\n                  console.log(\"Check declaration\");\n                  alert(\"Check\");\n                }\n\n              }\n            }            \n          } else if (this.getPieceColor(file, rank) === this.props.player) {\n            await this.unselectPiece();\n            await this.selectPiece(file, rank);\n          } else {\n            await this.unselectPiece();\n          }\n        }\n      }\n    }\n  };\n\n  async selectPiece(file, rank) {\n    const id = file + rank;\n\n    await this.setState({\n      selected: {\n        id: id,\n        position: {\n          file: file,\n          rank: rank\n        },\n        piece: this.getPiece(file, rank),\n        validMoves: this.getValidMoves(file, rank),\n        color: this.getPieceColor(file, rank)\n      }\n    });\n    document.getElementById(id).classList.add(\"selected\");\n    this.highlightValidMoves(this.state.selected.validMoves);\n  };\n\n  async unselectPiece() {\n    try {\n      document.getElementById(this.state.selected.id).classList.remove(\"selected\");\n      this.unhighlightValidMoves (this.state.selected.validMoves);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      await this.setState({\n        selected: {\n          id: null,\n          position: {\n            file: null,\n            rank: null\n          },\n          piece: null,\n          validMoves: null,\n          color: null\n        }\n      });\n    }\n  };\n  \n  handleMove (from, to) {\n    if (document.getElementById(from).innerHTML !== \"\") {\n      //this.unheighlightPreviousMove();  \n      var id = from.split(\"\");\n      var position = {\n        file : id[0],\n        rank : id[1]\n      }\n      let piece = this.getPiece(position.file, position.rank);\n      this.setPiece(position.file, position.rank, \"\");\n  \n      id = to.split(\"\");\n      position = {\n        file : id[0],\n        rank : id[1]\n      }\n      this.setPiece(position.file, position.rank, piece);\n  \n      //HTML RENDER\n      var field = document.getElementById(from);\n      document.getElementById(to).innerHTML = field.innerHTML;\n      field.innerHTML = \"\";\n\n      this.saveMove([from, to]);\n      //this.heighlightPreviousMove(from, to);\n    }\n  }\n\n  getValidMoves = (file, rank) => {\n\n    let validMoves = null;\n    let piece = this.getPiece(file, rank);\n    let position = {\n      file: file,\n      rank: rank\n    }\n\n    switch(piece) {\n      case \"P-W\" :\n        validMoves = this.getPawnMoves(position, \"W\");\n        break;\n       case \"P-B\" :\n        validMoves = this.getPawnMoves(position, \"B\");\n        break;\n      case \"K-W\" :\n        validMoves = this.getKingMoves(position, \"W\");\n        break;\n      case \"K-B\" :\n        validMoves = this.getKingMoves(position, \"B\");\n        break;\n      case \"N-W\" :\n        validMoves = this.getKnightMoves(position, \"W\");\n        break;\n      case \"N-B\" :\n        validMoves = this.getKnightMoves(position, \"B\");\n        break;\n      case \"R-W\" :\n        validMoves = this.getRookMoves(position, \"W\");\n        break;\n      case \"R-B\" :\n        validMoves = this.getRookMoves(position, \"B\");\n        break;\n      case \"B-W\" :\n        validMoves = this.getBishopMoves(position, \"W\");\n        break;\n      case \"B-B\" :\n        validMoves = this.getBishopMoves(position, \"B\");\n        break; \n      case \"Q-W\" :\n        validMoves = this.getQueenMoves(position, \"W\");\n        break;\n      case \"Q-B\" :\n        validMoves = this.getQueenMoves(position, \"B\");\n        break; \n      default:\n        validMoves = [];\n    }\n\n    return validMoves;\n  };\n\ngetPawnMoves(position, color) {\n  var code = position.file.charCodeAt(0);\n  let moves = null;\n  if (color === \"B\") {\n    moves = [[0,-1], [0,-2], [-1,-1], [1,-1]];\n  } else {\n    moves = [[0,1], [0,2], [-1,1], [1,1]];\n  }\n  var move = \"\";\n  var validMoves = [];\n\n  for (var i = 0; i < moves.length; i++) {\n    var file = String.fromCharCode( code + moves[i][0]);\n    var rank = String(parseInt(position.rank) + moves[i][1]);\n    if (FILES.includes(file) && RANKS.includes(rank)) {\n\n      if (moves[i][0] === 0 && (moves[i][1] === -2 || moves[i][1] === 2) && (position.rank === '7'\n        || position.rank === '2') &&  this.getPiece(file, rank) === \"\") {\n        move = file + rank;\n        validMoves.push(move);\n      } else if (moves[i][0] === 0 && (moves[i][1] === -1 || moves[i][1] === 1) && this.getPiece(file, rank) === \"\") {\n        move = file + rank;\n        validMoves.push(move);\n\n      } else if (moves[i][0] !== 0 && (this.getPiece(file, rank) !== \"\" && this.getPieceColor(file, rank) !== color)) {\n        move = file + rank;\n        validMoves.push(move);\n      }\n    }\n  }\n  \n  return validMoves;\n};\n\ngetKingMoves(position, color) {\n  var code = position.file.charCodeAt(0);\n  var moves = [[0,1], [1,1], [1,0], [1,-1], [0,-1],[-1,-1],[-1,0], [-1,1], [-2,0], [2,0]];\n  var move = \"\";\n  var validMoves = [];\n\n  for (var i = 0; i < moves.length; i++) {\n    var file = String.fromCharCode( code + moves[i][0]);\n    var rank = String(parseInt(position.rank) + moves[i][1]);\n    if (FILES.includes(file) && RANKS.includes(rank)) {\n\n      if (Math.abs(moves[i][0]) !== 2 && (this.getPiece(file, rank) === \"\" || this.getPieceColor(file, rank) !== color)) {\n        move = file + rank;\n        validMoves.push(move);\n\n      } \n      // TODO : рокировку\n    }\n  }\n\n  return validMoves;\n};\n\ngetKnightMoves(position, color) {\n  var code = position.file.charCodeAt(0);\n  var moves = [[1,2], [2,1], [2,-1], [1,-2], [-1,-2], [-2,-1], [-2,1], [-1,2]];\n  var move = \"\";\n  var validMoves = [];\n\n  for (var i = 0; i < moves.length; i++) {\n    var file = String.fromCharCode( code + moves[i][0]);\n    var rank = String(parseInt(position.rank) + moves[i][1]);\n    if (FILES.includes(file) && RANKS.includes(rank)) {\n\n      if (this.getPiece(file, rank) === \"\" || this.getPieceColor(file, rank) !== color) {\n        move = file + rank;\n        validMoves.push(move);\n\n      }\n    }\n  }\n\n  return validMoves;\n};\n\ngetRookMoves(position, color) {\n  var code = position.file.charCodeAt(0);\n  var moves = [\n                [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0],           // right\n                [-1,0], [-2,0], [-3,0], [-4,0], [-5,0], [-6,0], [-7,0],    // left\n                [0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [0,7],           // up\n                [0,-1], [0,-2], [0,-3], [0,-4], [0,-5], [0,-6], [0,-7],    // down\n              ];\n  var upBlocked = false;\n  var downBlocked = false;\n  var leftBlocked = false;\n  var rightBlocked = false;\n\n  var move = \"\";\n  var validMoves = [];\n\n  for (var i = 0; i < moves.length; i++) {\n    var file = String.fromCharCode( code + moves[i][0]);\n    var rank = String(parseInt(position.rank) + moves[i][1]);\n    if (FILES.includes(file) && RANKS.includes(rank)) {\n      \n      if (this.getPiece(file, rank) === \"\") {\n        move = file + rank;\n        validMoves.push(move);\n      }\n\n      else if (moves[i][0] > 0 && this.getPiece(file, rank) !== \"\" && !rightBlocked) {\n        i = i + (7 - moves[i][0]);\n        rightBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][0] < 0 && this.getPiece(file, rank) !== \"\" && !leftBlocked) {\n        i = i + (7 + moves[i][0]);\n        leftBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n\n      else if (moves[i][1] > 0 && this.getPiece(file, rank) !== \"\" && !upBlocked) {\n        i = i + (7 - moves[i][1]);\n        upBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][1] < 0 && this.getPiece(file, rank) !== \"\" && !downBlocked) {\n        i = i + (7 + moves[i][1]);\n        downBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n    }\n  }\n\n  return validMoves;\n};\n\ngetQueenMoves(position, color) {\n  var code = position.file.charCodeAt(0);\n  var moves = [\n                [1,1], [2,2], [3,3], [4,4], [5,5], [6,6], [7,7],                  // up-right\n                [-1,-1], [-2,-2], [-3,-3], [-4,-4], [-5,-5], [-6,-6], [-7,-7],    // down-left\n                [-1,1], [-2,2], [-3,3], [-4,4], [-5,5], [-6,6], [-7,7],           // up-left\n                [1,-1], [2,-2], [3,-3], [4,-4], [5,-5], [6,-6], [7,-7],           // down-right\n                 \n                [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0],                  // right\n                [-1,0], [-2,0], [-3,0], [-4,0], [-5,0], [-6,0], [-7,0],           // left\n                [0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [0,7],                  // up\n                [0,-1], [0,-2], [0,-3], [0,-4], [0,-5], [0,-6], [0,-7],           // down\n              ];\n  var upRightBlocked = false;\n  var downLeftBlocked = false;\n  var upLeftBlocked = false;\n  var downRightBlocked = false;\n  var upBlocked = false;\n  var downBlocked = false;\n  var leftBlocked = false;\n  var rightBlocked = false;\n\n  var move = \"\";\n  var validMoves = [];\n\n  for (var i = 0; i < moves.length; i++) {\n    var file = String.fromCharCode( code + moves[i][0]);\n    var rank = String(parseInt(position.rank) + moves[i][1]);\n    if (FILES.includes(file) && RANKS.includes(rank)) {\n      \n      if (this.getPiece(file, rank) === \"\") {\n        move = file + rank;\n        validMoves.push(move);\n      }\n      else if (moves[i][0] > 0 && moves[i][1] === 0 && this.getPiece(file, rank) !== \"\" && !rightBlocked) {\n        i = i + (7 - moves[i][0]);\n        rightBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][0] < 0 && moves[i][1] === 0 && this.getPiece(file, rank) !== \"\" && !leftBlocked) {\n        i = i + (7 + moves[i][0]);\n        leftBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n\n      else if (moves[i][0] === 0 && moves[i][1] > 0 && this.getPiece(file, rank) !== \"\" && !upBlocked) {\n        i = i + (7 - moves[i][1]);\n        upBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][0] === 0 && moves[i][1] < 0 && this.getPiece(file, rank) !== \"\" && !downBlocked) {\n        i = i + (7 + moves[i][1]);\n        downBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n\n      else if (moves[i][0] > 0 && moves[i][1] > 0 && this.getPiece(file, rank) !== \"\" && !upRightBlocked) {\n        i = i + (7 - moves[i][0]);\n        upRightBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][0] < 0 && moves[i][1] < 0 && this.getPiece(file, rank) !== \"\" && !downLeftBlocked) {\n        i = i + (7 + moves[i][0]);\n        downLeftBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n\n      else if (moves[i][0] < 0 && moves[i][1] > 0 && this.getPiece(file, rank) !== \"\" && !upLeftBlocked) {\n        i = i + (7 - moves[i][1]);\n        upLeftBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][0] > 0 && moves[i][1] < 0 && this.getPiece(file, rank) !== \"\" && !downRightBlocked) {\n        i = i + (7 + moves[i][1]);\n        downRightBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      } \n    }\n  }\n\n  return validMoves;\n};\n\n\ngetBishopMoves(position, color) {\n  var code = position.file.charCodeAt(0);\n  var moves = [\n                [1,1], [2,2], [3,3], [4,4], [5,5], [6,6], [7,7],                  // up-right\n                [-1,-1], [-2,-2], [-3,-3], [-4,-4], [-5,-5], [-6,-6], [-7,-7],    // down-left\n                [-1,1], [-2,2], [-3,3], [-4,4], [-5,5], [-6,6], [-7,7],           // up-left\n                [1,-1], [2,-2], [3,-3], [4,-4], [5,-5], [6,-6], [7,-7],           // down-right\n              ];\n  var upRightBlocked = false;\n  var downLeftBlocked = false;\n  var upLeftBlocked = false;\n  var downRightBlocked = false;\n\n  var move = \"\";\n  var validMoves = [];\n\n  for (var i = 0; i < moves.length; i++) {\n    var file = String.fromCharCode( code + moves[i][0]);\n    var rank = String(parseInt(position.rank) + moves[i][1]);\n    if (FILES.includes(file) && RANKS.includes(rank)) {\n      \n      if (this.getPiece(file, rank) === \"\") {\n        move = file + rank;\n        validMoves.push(move);\n      }\n\n      else if (moves[i][0] > 0 && moves[i][1] > 0 && this.getPiece(file, rank) !== \"\" && !upRightBlocked) {\n        i = i + (7 - moves[i][0]);\n        upRightBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][0] < 0 && moves[i][1] < 0 && this.getPiece(file, rank) !== \"\" && !downLeftBlocked) {\n        i = i + (7 + moves[i][0]);\n        downLeftBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n\n      else if (moves[i][0] < 0 && moves[i][1] > 0 && this.getPiece(file, rank) !== \"\" && !upLeftBlocked) {\n        i = i + (7 - moves[i][1]);\n        upLeftBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n      else if (moves[i][0] > 0 && moves[i][1] < 0 && this.getPiece(file, rank) !== \"\" && !downRightBlocked) {\n        i = i + (7 + moves[i][1]);\n        downRightBlocked = true;\n        if (this.getPieceColor(file, rank) !== color) {\n          move = file + rank;\n          validMoves.push(move);\n        }\n      }\n    }\n  }\n\n  return validMoves;\n};\n\n\n  highlightValidMoves (moves) {\n    moves.forEach((move) => {\n      document.getElementById(move).classList.add(\"highlighted\");\n    })\n  };\n\n  unhighlightValidMoves (moves) {\n    moves.forEach((move) => {\n      document.getElementById(move).classList.remove(\"highlighted\");\n    })\n  };\n\n  heighlightPreviousMove(from, to) {\n    document.getElementById(from).classList.add(\"highlighted-move\");\n    document.getElementById(to).classList.add(\"highlighted-move\");\n  };\n  \n  unheighlightPreviousMove() {\n    var size = this.props.record.moves.length;\n    if (size > 0) {\n      var from = this.props.record.moves[size - 1][0];\n      var to = this.props.record.moves[size - 1][1];\n      document.getElementById(from).classList.remove(\"highlighted-move\");\n      document.getElementById(to).classList.remove(\"highlighted-move\");\n    }\n  };\n\n  saveMove(move) {\n    let board =  JSON.parse(JSON.stringify(this.props.board)); \n    this.props.record.boards.push(board);\n    this.props.record.moves.push(move);\n  };\n\n  getPieceColor (file, rank) {\n    return this.getPiece(file, rank).charAt(2);\n  };\n\n  getPiece (file, rank) {\n    return this.props.board[file][rank];\n  };\n\n  setPiece (file, rank, piece) {\n    this.props.board[file][rank] = piece;               \n  };\n\n  getPiecePosition(piece) {\n    var id = null;\n    for (var i = 7; i >= 0; i--) { \n      for (var j = 0; j < 8; j++) { \n        if (this.getPiece(FILES[j], RANKS[i]) === piece) {\n          id = FILES[j] + RANKS[i];\n          return id;\n        }\n      }\n    }\n  };\n\n  validateCheck() {\n    let check = false;\n    let whiteKing = \"K-W\";\n    let blackKing = \"K-B\";\n    let blacks = \"B\";\n    let validMoves = [];\n    let kingPosition = this.props.player === blacks ? this.getPiecePosition(blackKing) : this.getPiecePosition(whiteKing);\n    let pieces = this.props.player === blacks ? WHITE_PIECES : BLACK_PIECES;\n  \n    // verifier toutes les piece d'opponent, si au moins une fait check return true\n    pieces.forEach((piece) => {\n        var position = this.getPiecePosition(piece);\n        if (position !== null) {\n          validMoves = this.getValidMoves(position.charAt(0), position.charAt(1) );\n          if (validMoves.includes(kingPosition)) {\n            check = true;\n            return check;\n          }\n        }\n    });\n  \n    return check;\n  };\n\n  validateCheckmate() {\n    var tempBoard = JSON.parse(JSON.stringify(this.props.board));\n    var checkFields = [];\n    var checkmate = true;\n    var blacks = \"B\";\n    var opponentPieces = this.props.player === blacks ? WHITE_PIECES : BLACK_PIECES;\n    var opponentValidMoves = [];\n    var currentPlayerPieces = this.props.player === blacks ? BLACK_PIECES : WHITE_PIECES;\n    var currentPlayerValidMoves = [];\n    var kingValidMoves = [];\n    var kingPosition = this.props.player === blacks ? this.getPiecePosition(\"K-B\") : this.getPiecePosition(\"K-W\");\n\n    // verify king escapes\n    kingValidMoves = this.getValidMoves(kingPosition.charAt(0), kingPosition.charAt(1));\n    //console.log(\"KINGS MOVES: \" + kingValidMoves)\n    kingValidMoves.forEach((move) => {\n      opponentPieces.forEach((piece) => {\n        var position = this.getPiecePosition(piece);\n        if (position !== null) {\n          opponentValidMoves = this.getValidMoves(position.charAt(0), position.charAt(1) );\n          if (opponentValidMoves.includes(move)) {\n            checkFields.push(move);\n          } \n        }\n      });\n      //console.log(checkFields)\n      if (!checkFields.includes(move)) {\n        checkmate = false;\n        return false;\n      }\n    });\n\n    // verify king protection\n    currentPlayerPieces.forEach((piece) => {\n      var position = this.getPiecePosition(piece);\n      if (position !== null) {\n        currentPlayerValidMoves = this.getValidMoves(position.charAt(0), position.charAt(1) );\n\n        currentPlayerValidMoves.forEach((move) => {\n          // TODO\n          \n        });\n      }\n\n      \n\n    });\n\n\n    return checkmate;\n  };\n\n  renderBoard = () => {\n    const { error, isLoaded } = this.props;\n\n    if (error) {\n      return (<div className = { \"error\" } >Error: {error.message}</div>);\n    } else if (!isLoaded) {\n      return (<div className = { \"loading\" } >Loading...</div>);\n    } else {\n      let ranks = []\n      for (let i = 7; i >= 0; i--) { \n        let fields = [];\n        for (let j = 0; j <= 7; j++) { \n          let field = {\n            file : FILES[j],\n            rank : RANKS[i],\n            color : j%2 === i%2 ? \"black-field\" : \"white-field\",\n            piece : this.getPiece(FILES[j], RANKS[i]),\n          }\n\n          fields.push(<Field key={field.file + field.rank} field={field} handleClick={this.handleClick} />)\n        }\n\n        ranks.push(<tr key={i} id={i}>{fields}</tr>)\n      }\n\n      return(\n        <div className=\"chess-container\">\n            <table id=\"chess-board\" className=\"chess-board\">\n              <tbody>\n                {ranks}\n              </tbody>\n            </table>\n        </div>\n      )\n    }\n  }\n\n  render(){    \n    return(\n      this.renderBoard()\n    )\n  }\n}\n\n// CONSTANTS\nconst FILES = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"];\nconst RANKS = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\"];\n\nconst BLACK_PIECES = [\"P-B\", \"N-B\", \"B-B\", \"R-B\", \"Q-B\", \"K-B\"];\nconst WHITE_PIECES = [\"P-W\", \"N-W\", \"B-W\", \"R-W\", \"Q-W\", \"K-W\"];\n\nexport default Board;\n","import React, { Component } from 'react';\nimport Menu  from './components/Menu';\nimport Timer from './components/Timer';\nimport Board from './components/Board';\nimport './App.css';\nimport axios from 'axios';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      error: null,\n      isLoaded: false,\n      board: null,\n      player: null,\n      running: null,\n      time: null,\n      timer: null,\n      winner: null,\n      record: {\n        boards: null,\n        moves: null\n      }\n    };\n    this.switchPlayer = this.switchPlayer.bind(this);\n    this.resetTimer = this.resetTimer.bind(this);\n    this.undo = this.undo.bind(this);\n    this.gameOver = this.gameOver.bind(this);\n  };\n\n  componentDidMount() {\n    this.initialize();\n  };\n\n  switchPlayer() {\n    const whiteKing = \"&#x2654;\";\n    const blackKing = \"&#x265A;\";\n\n    if (this.state.player === players.whites) {\n      this.setState({\n        player : players.blacks\n      });\n      document.getElementById(\"player\").innerHTML = blackKing;\n    } else {\n      this.setState({\n        player : players.whites\n      });\n      document.getElementById(\"player\").innerHTML = whiteKing;\n    }\n  };\n\n  switchStatus = () => {\n    this.setState({\n      running : !this.state.running\n    })\n  };\n\n\n\n/*  \n  loadBoard() {\n    var xmlhttp = new XMLHttpRequest();\n    var url = \"http://www-ens.iro.umontreal.ca/~levestev/resources/ift3225/tp3/chess.json\";\n\n    xmlhttp.onreadystatechange = function() {\n      if (this.readyState === 4 && this.status === 200) {\n        var data = JSON.parse(this.responseText);\n        console.log(data);\n      }\n    };\n\n    xmlhttp.open(\"GET\", url, true);\n    xmlhttp.send(); \n  };\n\n  */\n\n/*  \n loadBoard = async() => {\n   let board = null;\n   let url = \"http://www-ens.iro.umontreal.ca/~levestev/resources/ift3225/tp3/chess.json\";\n   let responce = await axios.get(url);\n   board = responce.data;\n\n\n  await this.setState({ \n    board: board,\n    isLoaded: true,\n   });\n\n   if (this.state.isLoaded) {\n    this.setState({\n      record : {\n        boards: [JSON.parse(JSON.stringify(this.state.board))],\n        moves: []\n      }\n    }); \n  } \n} \n\nsetBoard = (board) => {\n  let url = \"http://www-ens.iro.umontreal.ca/~levestev/resources/ift3225/tp3/chess.json\";\n  axios.post(url , board);\n}\n */\n\n\n\n \n  loadBoard = async() => {\n    await this.setState({ \n      board: JSON.parse(JSON.stringify(INITIAL_BOARD)),\n      isLoaded: true,\n     });\n\n     if (this.state.isLoaded) {\n      this.setState({\n        record : {\n          boards: [JSON.parse(JSON.stringify(this.state.board))],\n          moves: []\n        }\n      }); \n    } \n  } \n \n  initialize() {\n    this.loadBoard();\n    this.setState({ \n      player: players.whites,\n      running: false,\n      timer: 0,\n      time: 0,\n      record: {\n        boards: [],\n        moves: []\n      }\n     });\n  }\n\n  newGame = () => {\n    console.log(\"New game is set\");\n    this.initialize();\n    this.stopTimer();\n    this.resetTimer();\n  };\n\n  gameOver() {\n    this.switchStatus();\n    this.stopTimer();\n    document.getElementById(\"start\").innerHTML = \"Start\";\n  };\n\n  startGame = () => {\n    if (document.getElementById(\"start\").innerHTML === \"Start\") {\n      this.startTimer();\n      this.switchStatus();\n      document.getElementById(\"start\").innerHTML = \"Pause\";\n    } else {\n      this.stopTimer();\n      document.getElementById(\"start\").innerHTML = \"Start\";\n      this.switchStatus();\n    } \n  };\n\n  undo = () => {\n    if (this.state.record.boards.length > 1) {\n\n      // remove last move\n      this.state.record.boards.pop();\n      this.state.record.moves.pop();\n\n      let boards = this.state.record.boards;\n      let moves = this.state.record.moves;\n      let board = JSON.parse(JSON.stringify(this.state.record.boards[this.state.record.boards.length - 1])); \n\n      // update board\n      this.setState({\n        board: board,\n        record: {\n          boards: boards,\n          moves: moves\n        },\n      })\n      this.switchPlayer();\n    } \n  };\n\n  /* \n  **GESTION DU TEMPS\n  */\n\n  startTimer = () => {\n    var timer = setInterval(this.clock, 1000);\n    this.setState({\n      timer: timer\n    });\n  };\n\n  clock = () => {\n    let time = this.state.time + 1 \n\n    this.setState({ \n      time: time\n    });\n\n    document.getElementById(\"timer\").innerHTML = \n      (this.getMinutes() <= 9 ? \"0\" + this.getMinutes() : this.getMinutes()) + \n      \":\" + (this.getSeconds() <= 9 ? \"0\" + this.getSeconds() : this.getSeconds()); \n  };\n\n  getMinutes() {\n    var minutes = Math.floor(this.state.time/60);\n    return minutes;\n  }\n\n  getSeconds() {\n    var seconds = this.state.time - (this.getMinutes() * 60);\n    return seconds;\n  }\n\n  stopTimer() {\n    clearInterval(this.state.timer);\n  };\n\n  resetTimer() {\n    this.setState({\n      time : 0\n    })\n    document.getElementById(\"timer\").innerHTML = \"00:00\"; \n  };\n\n  render() {\n    const { running, player, record, board, error, isLoaded } = this.state\n    return (\n      <main className=\"App\">\n        <header className=\"App-header container-fluid\">\n\n          <Menu \n            startGame = { this.startGame }\n            newGame = { this.newGame }\n            undo = { this.undo }\n          />\n\n          <Timer />\n\n          <Board \n            board = { board }\n            error = { error }\n            isLoaded = { isLoaded }\n            running = { running }\n            player = { player }\n            record = { record }\n            switchPlayer = { this.switchPlayer }\n            resetTimer = { this.resetTimer }\n            undo = { this.undo }\n            gameOver = { this.gameOver }\n            />\n\n        </header>\n      </main>\n    );\n  }\n}\n\n\n// CONSTANTS\n\nconst players = {\n  whites : \"W\",\n  blacks : \"B\"\n};\n\nconst INITIAL_BOARD = {\n  \"a\" : {\n    \"1\":\"R-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"R-B\"\n  },\n  \"b\" : {\n    \"1\":\"N-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"N-B\"\n  },\n  \"c\" : {\n    \"1\":\"B-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"B-B\"\n  },\n  \"d\" : {\n    \"1\":\"Q-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"Q-B\"\n  },\n  \"e\" : {\n    \"1\":\"K-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"K-B\"\n  },\n  \"f\" : {\n    \"1\":\"B-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"B-B\"\n  },\n  \"g\" : {\n    \"1\":\"N-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"N-B\"\n  },\n  \"h\" : {\n    \"1\":\"R-W\",\n    \"2\":\"P-W\",\n    \"3\":\"\",\n    \"4\":\"\",\n    \"5\":\"\",\n    \"6\":\"\",\n    \"7\":\"P-B\",\n    \"8\":\"R-B\"\n  },\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}